<div class="p-md" ng-controller="CommDictController">
	<div class="panel panel-default">
		<div class="panel-heading row">
			<div class="col-md-10">
				<span class="no-margin" ng-bind-html="action_nav"></span>
			</div>
			<div class="col-md-2">
				<button ng-if="hashAccess[_self_module.module_id]>1" ng-click="addEdit('add')" class="btn btn-rounded btn-info btn-sm">
					<i class="fa fa-fw m-r-xs fa-plus"></i> 添加{{_self_module.module_name}}
				</button>
			</div>
		</div>
		<table class="table">
			<thead>
				<tr>
					<th class="w-xs">#</th>
					<th class="w">属于</th>
					<th class="w">对应类别</th>
					<th class="w">字段</th>
					<th class="w">值</th>
					<th class="w">英文</th>
					<th class="w">关联字段值</th>
					<th>备注</th>
					<th class="w"></th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="(i, dicts) in dictList"> 
					<td></td>
					<td>{{moduleHash[i].module_name}}</td>
					<td colspan="6" class="no-padding panel">
						<table class="table no-margin">
							<tr class="row" ng-repeat="(j, dict) in dicts">
								<td class="w">{{moduleHash[j].module_name}}</td>
								<td class="no-padding panel">
									<table class="table no-margin">
										<tr ng-repeat="(k, di) in dict">
											<td class="w">{{fieldHash[k]}}</td>
											<td class="no-padding panel">
												<table class="table no-margin">
													<tr ng-repeat="(l, d) in di">
														<td class="w">
															{{d.dict_val}}
														</td>
														<td class="w">
															{{d.dict_enval}}
														</td>
														<td class="w">
															{{d.dict_linkage}}
														</td>
														<td>
															{{d.dict_node}}
														</td>
														<td class="w">
															<div class="pull-right btn-group">
																<a ng-click="addEdit('edit', d, l)" class="btn btn-sm btn-rounded"><i class="ti-layers"></i> </a>
																<a ng-click="delete(d.dict_id, l)" class="btn btn-sm btn-rounded"><i class="fa fa-fw m-r-xs fa-trash"></i> </a>
															</div>
														</td>
													</tr>
												</table>
											</td>
										</tr>
									</table>
								</td>
							</tr>
						</table> 
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
<script type="text/ng-template" id="AddEditCommDict.html">
	<div class="aside box-shadow aside-m" tabindex="-1" role="dialog">
		<div class="aside-dialog">
			<div class="aside-content">
				<form name="thisForm" class="form-horizontal form-validation" id="thisForm" ng-submit="saveData()">
					<div class="panel panel-default">
						<div class="panel-heading bg-white">
							<i class="fa fa-building-o"> </i>
							<span class="no-margin" ng-bind-html="action_nav_aside"></span>
							<button type="button" class="close" ng-click="$hide()">&times;</button>
						</div>
						<div class="panel-body">
							<div class="form-group">
								<label class="col-sm-3 control-label">选择类别</label>
								<div class="col-sm-4">
									<select class="form-control w-sm" ng-model="dict.module_father_id"
										ng-options="father.module_id as father.module_name for father in moduleFather" required>
									</select>
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">选择次类</label>
								<div class="col-sm-4">
									<select class="form-control w-sm" ng-model="dict.module_id"
										ng-options="child.module_id as child.module_name for child in module[dict.module_father_id]" 
											placeholder="次类">
									</select>
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">选择字段</label>
								<div class="col-sm-4">
									<select class="form-control w-sm" ng-model="dict.dict_field"
										ng-options="f.field_id as f.field_name for f in field[dict.module_id]" 
											placeholder="字段">
									</select>
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">输入值</label>
								<div class="col-sm-4">
									<input type="text" class="form-control" ng-model="dict.dict_val" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">输入英文</label>
								<div class="col-sm-4">
									<input type="text" class="form-control" ng-model="dict.dict_enval" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">关联字段值</label>
								<div class="col-sm-4">
									<input type="text" class="form-control" ng-model="dict.dict_linkage" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">输入备注</label>
								<div class="col-sm-4">
									<input type="text" class="form-control" ng-model="dict.dict_node" />
								</div>
							</div>
						</div>
						<footer class="panel-footer text-right">
							<div class="btn-group">
								<button type="button" class="btn btn-rounded btn-default" ng-click="$hide()"><i class="fa fa-times"> </i> 关闭</button>
								<button type="submit" class="btn btn-rounded btn-primary" btn-loading-text="{{'common.hint.LOADING' | translate}}"
								trigger-loading="beginLoading"><i class="fa fa-save"> </i> 保存</button>
							</div>
						</footer>
					</div>
				</form>
			</div>
		</div>
	</div>
</script>
<!-- AddEditCommDict.html -->
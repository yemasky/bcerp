
<!DOCTYPE html>
<html lang="zh-Hans-CN">
<head>

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>博威利尔.ERP ᵛ¹·⁰·⁰ </title>
<link rel="shortcut icon" href="/static/favicon.ico">
<script language="javascript">var __VERSION = ''; var baseDateTime = '', baseSeconds = 0;function setBaseSeconds() {baseSeconds++;} setInterval(setBaseSeconds, 1000);</script>
<link rel="stylesheet" href="/static/styles/app.min.css?" type="text/css" />
<!-- commom -->
<script language="javascript" src="/static/jquery-3.4.1.min.js?"></script>
<script language="javascript">
    var __RESOURCE = '/static/'; var __IMGWEB = 'http://www.xiaoqu.love/xiaoqu/images/';var __WEB = '/erp/';
    var __ImagesUploadUrl = '9t8_e1HtIvlI4QB0r6DqL835ywKZzi79';var __ImagesManagerUrl = 'wXyXTSl-qztI4QB0r6DqL835ywKZzi79';
    var __AuditingViewUrl = 'SeL4I7IYWm5I4QB0r6DqL835ywKZzi79';
//jQuery 插件
(function ($) {
    $.serializeFormat = function (id) {//取出form的值包括 xxx[yyy]的值
		var serialize = $(id).serializeArray();var serializeFormat = {},n_name='',n_n_name='';//console.log(serialize);
        for(var i in serialize) {
			var name = serialize[i].name;
			var bIndex = name.indexOf('[');
			if(bIndex > 0) {
				var arrayName = name.split('[');
				for(var j = 0; j < arrayName.length; j++) {
					var n_key = arrayName[j];
					var n_keyIndex = n_key.indexOf(']');
					if(n_keyIndex > 0) {n_key = n_key.substring(0, n_keyIndex);}
					if(j == 0) {if(typeof(serializeFormat[n_key]) == 'undefined') serializeFormat[n_key] = {};n_name = n_key;}
					if(j == 1) {
						if(typeof(serializeFormat[n_name][n_key]) == 'undefined') serializeFormat[n_name][n_key] = {};n_n_name = n_key;
						if(arrayName.length == 2) serializeFormat[n_name][n_key] = serialize[i].value;
					}
					if(j == 2) {serializeFormat[n_name][n_n_name][n_key] = serialize[i].value;}//最多2级
				}//if(item_json != '') serializeFormat = eval('('+item_json+')');//var eIndex = name.indexOf(']');//var n_name = name.substring(0, bIndex);var key = name.substring(bIndex+1, eIndex);//if(typeof(serializeFormat[n_name]) == 'undefined') serializeFormat[n_name] = {};//serializeFormat[n_name][key] = serialize[i].value;
			} else {
				serializeFormat[name] = serialize[i].value;
			}
		}
		function explode(name) {
			var serializeFormat = {};var bIndex = name.indexOf('[');var eIndex = name.indexOf(']');
			var n_name = name.substring(0, bIndex);var key = name.substring(bIndex+1, eIndex);
			if(typeof(serializeFormat[n_name]) == 'undefined') serializeFormat[n_name] = {};
			serializeFormat[n_name][key] = serialize[i].value;
		}
        return serializeFormat;
    }
})(jQuery);
</script>
<script language="javascript" src="/static/angular.min.1.6.8.js?"></script>
<script language="javascript" src="/static/angular-lib.min.js?"></script>
<script language="javascript" src="/static/angular-lib-extend.min.js?"></script>
<script language="javascript" src="/static/vendor/modules/angular-strap/angular-strap.min.js?"></script>
<script language="javascript" src="/static/vendor/modules/angular-smart-table/smart-table.min.2.1.10.js?"></script>   
<script language="javascript">//'ui.jp',,'angular-popups', 'ui.select'
angular.module("app",['ngMessages','ngAnimate','ngCookies','ngResource','ngRoute','ngSanitize','ngTouch','pascalprecht.translate','ngStorage','ui.router','ui.utils','mgcrea.ngStrap','oc.lazyLoad','ui.load','angular-loading-bar','smart-table'
]);
var app = angular.module("app").config(["$controllerProvider","$compileProvider","$filterProvider","$provide", "$ocLazyLoadProvider",
	function($controllerProvider, $compileProvider, $filterProvider, $provide) {
		app.controller = $controllerProvider.register, app.directive  = $compileProvider.directive, 
		app.filter     = $filterProvider.register,     app.factory    = $provide.factory, 
		app.service    = $provide.service,             app.constant   = $provide.constant,
		app.value      = $provide.value
}]).config(["$translateProvider", function($translateProvider) {
    $translateProvider.useStaticFilesLoader({
        prefix: "/static/i18n/langs/",
        suffix: ".json"
    }), $translateProvider.preferredLanguage("en"), $translateProvider.useLocalStorage(),$translateProvider.useSanitizeValueStrategy('sanitize');
}]).factory("$httpFactory", function($http, $modal, $translate, $alert, cfpLoadingBar) {
    var factory = {};
	let header = $http.defaults.headers.common;
    factory.post = function($url, $scope, callBack) {//,'Content-Type': 'application/json'
        //$http.defaults.headers.common.ajaxrequest = true;
        $http.post($url, $scope.param, {timeout : 5000,headers:{header}}).then(function(response) {
			if(response.data.success == 0) {
                var message = $translate.instant("error.code."+response.data.code);
				if(response.data.message != "") message = message + ' "' + response.data.message+'"';
				var message_ext = $('label[for="'+response.data.item[0]+'"]').text();
				if(message_ext != null && message_ext != '') message += '［'+message_ext + '］数据错误！';
				$modal({title: 'Error', content: message, templateUrl: '/modal-warning.html', show: true});
			} else if(response.data.success == -1) {
                var message = $translate.instant("notice.code."+response.data.code) + ' ' + response.data.message;
				var message_ext = $('label[for="'+response.data.item[0]+'"]').text();
				if(message_ext != null && message_ext != '') message += '［'+message_ext + '］数据错误！';
				$modal({title: 'Notice', content: message, templateUrl: '/modal-notice.html', show: true});
			} else if(response.data.success == 1) {
				//
			} else {
				$modal({title: 'Error', content: '请求错误，请检查!', templateUrl: '/modal-warning.html', show: true});
			}
			callBack(response);
            cfpLoadingBar.complete();
		}, function(response){
			if(response != null && typeof(response['status']) != 'undefined' && response['status'] == -1) {
				$modal({title: 'Time out', content: '连接服务器超时，时间5秒!', templateUrl: '/modal-warning.html', show: true});
			} else {
				$modal({title: 'Error', content: '请求错误数据解析返回出错，请检查!', templateUrl: '/modal-warning.html', show: true});
			}
			callBack({'data':{'success':0,'code':'000000'}});
            cfpLoadingBar.complete();
		});
		factory.deleteHeader('method');
    }
	factory.get = function($url, $scope, callBack) {//,'Content-Type': 'application/json'
        //$http.defaults.headers.common.ajaxrequest = true;
        $http.get($url, $scope.param, {timeout : 5000, headers:{header}}).then(function(response) {
			if(response.data.success == 0) {
				var message = $scope.getErrorByCode(response.data.code);
				$modal({title: 'Error', content: message, templateUrl: '/modal-warning.html', show: true});
			} else if(response.data.success == 1) {
				//
			} else {
				$modal({title: 'Error', content: '请求错误，请检查!', templateUrl: '/modal-warning.html', show: true});
			}
			callBack(response);
            cfpLoadingBar.complete();
		}, function(response){
			if(response != null && typeof(response['status']) != 'undefined' && response['status'] == -1) {
				$modal({title: 'Time out', content: '连接服务器超时，时间5秒!', templateUrl: '/modal-warning.html', show: true});
			} else {
				$modal({title: 'Error', content: '请求错误数据解析返回出错，请检查!', templateUrl: '/modal-warning.html', show: true});
			}
			callBack({'data':{'success':0,'code':'000000'}});
            cfpLoadingBar.complete();
		});
		factory.deleteHeader('method');
    }
	factory.header = function($key, $value) {
		var header = {};header[$key] = $value;
		$http.defaults.headers.common = header;//$http.defaults.headers.common.Authorization = JSON.stringify(header);
	}
	factory.deleteHeader = function($key) {
		if(typeof($http.defaults.headers.common[$key]) != 'undefined') delete $http.defaults.headers.common[$key];
	}
	//if(typeof($http.defaults.headers.common['refresh']) != 'undefined') delete $http.defaults.headers.common['refresh'];//删除刷新
    return factory;
});
app.service("$httpService", function($httpFactory){
    this.post = function($url, $scope, callBack) {return $httpFactory.post($url, $scope, callBack);}
	this.get = function($url, $scope, callBack) {return $httpFactory.get($url, $scope, callBack);}
	this.header = function($key, $value) {return $httpFactory.header($key, $value);}
	this.deleteHeader = function($key) {return $httpFactory.deleteHeader($key);}
}).directive("triggerLoading", function(){
	return {
		restrict:'A',
		link:function($scope, $element, $attr){
			$scope.prevText = $element.html();
			$scope.$watch(function(){
				return $scope.$eval($attr.triggerLoading);
			},function($value){
				if(angular.isDefined($value)){//element.toggleClass('disabled',value);
					$value ? $element.attr('disabled', true) : $element.removeAttr('disabled');
					$element.html(($value ? '<div class="spinner-icon"></div>'+$attr.btnLoadingText : $scope.prevText));
				}
			});
		}
	}
}).directive('stringToNumber', function() {
  	return {
        require: 'ngModel',
        link: function($scope, $element, $attrs, ngModel) {
            ngModel.$parsers.push(function(value) {
                return '' + value;
            });
            ngModel.$formatters.push(function(value) {
                return parseFloat(value);
            });
        }
  };
}).directive('toggleClass', function(){
    return {
        restrict: 'A',
        scope: {
            toggleClass: '@'
        },
        link: function($scope, $element, $attr){
            var toggleTarget = $attr.classTarget;
            $element.on('mouseover', function(){
                if(typeof toggleTarget == 'undefined' || toggleTarget == '') {
                    $element.addClass($scope.toggleClass);
                } else {
                    $element.find(toggleTarget).addClass($scope.toggleClass);
                }
            });
            $element.on('mouseout', function(){
                if(typeof toggleTarget == 'undefined' || toggleTarget == '') {
                    $element.removeClass($scope.toggleClass);
                } else {
                    $element.find(toggleTarget).removeClass($scope.toggleClass);
                }
            });
        }
    };
});
app.filter('propsFilter', function() {
    return function(items, props) {
        var out = [];
        if (angular.isArray(items)) {
          items.forEach(function(item) {
            var itemMatches = false;
            var keys = Object.keys(props);
            for (var i = 0; i < keys.length; i++) {
				var prop = keys[i];
				var text = props[prop].toLowerCase();
				if (item[prop].toString().toLowerCase().indexOf(text) !== -1) {
					itemMatches = true;
					break;
				}
            }
            if (itemMatches) {
              out.push(item);
            }
          });
        } else {
          // Let the output be the input untouched
			out = items;
        }
        return out;
    };
});
angular.module("app").constant("MODULE_CONFIG", [
    {name: "ui.select",module: !0,files: [__RESOURCE+"vendor/modules/angular-ui-select/select.min.js", __RESOURCE+"vendor/modules/angular-ui-select/select.min.css"]}, 
    {name: "easyPieChart",module: !1,files: [__RESOURCE+"vendor/jquery/easypiechart/jquery.easy-pie-chart.js"]},
	{name: "angularBootstrapNavTree",module: !0,files: [__RESOURCE+"vendor/modules/angular-bootstrap-nav-tree/abn_tree_directive.js", __RESOURCE+"vendor/modules/angular-bootstrap-nav-tree/abn_tree.css"]}
]).config(["$ocLazyLoadProvider", "MODULE_CONFIG", function($ocLazyLoadProvider, MODULE_CONFIG) {
    $ocLazyLoadProvider.config({
        debug: !1,
        events: !1,
        modules: MODULE_CONFIG
    })
}]);
angular.module("app").directive("lazyLoad", ["MODULE_CONFIG", "$ocLazyLoad", "$compile", function(a, b, c) {
    return {
        restrict: "A",
        compile: function(d) {
            var e, f = d.contents().remove();
            return function(d, g, h) {
                angular.forEach(a, function(a) {
                    a.name == h.lazyLoad && (e = a.module ? a.name : a.files)
                }), b.load(e).then(function() {
                    c(f)(d, function(a) {
                        g.append(a)
                    })
                })
            }
        }
    }
}]);
angular.module("app").directive("uiFullscreen", ["$ocLazyLoad", "$document", function(a, b) {
    return {
        restrict: "AC",
        link: function(c, d, e) {
            d.addClass("hide"), a.load(__RESOURCE+"vendor/libs/screenfull.min.js").then(function() {
                screenfull.enabled && d.removeClass("hide"), d.bind("click", function() {
                    var a;
                    e.target && (a = angular.element(e.target)[0]), screenfull.toggle(a)
                });
                var a = angular.element(b[0].body);
                b.on(screenfull.raw.fullscreenchange, function() {
                    screenfull.isFullscreen ? a.addClass("fullscreen") : a.removeClass("fullscreen")
                })
            })
        }
    }
}]);
app.run(["$rootScope", "$state", "$stateParams", "$location", "$httpService", function($rootScope, $state, $stateParams, $location, $httpService) {
    $rootScope.$state = $state, $rootScope.$stateParams = $stateParams;
	var noLogin = "1";
	if (noLogin == "1") {
		$location.path('/login');//
	} else {
		var current_path = $location.path();
		current_path = current_path == '' || current_path == '/login' ? '/app/home' : current_path;
		$location.path(current_path);//'/app/home'
	}
	//
}]).config(function($controllerProvider, $compileProvider,$filterProvider,$provide){        
    app.register = {
        //得到$controllerProvider的引用
        controller : $controllerProvider.register,
        //同样的，这里也可以保存directive／filter／service的引用
        directive: $compileProvider.directive,
        filter: $filterProvider.register,
        service: $provide.service
    };
}).config(["$stateProvider", "$urlRouterProvider", "$httpProvider", function($stateProvider, $urlRouterProvider, $httpProvider) {
	//$urlRouterProvider.otherwise("/app/dashboard"),
	$httpProvider.defaults.headers.common = {'ajaxRequest' : true};
	function randomUrl(channel) {
		if(angular.isDefined($httpProvider.defaults.headers.common.ajaxRequest))
			delete $httpProvider.defaults.headers.common['ajaxRequest'];
		return '/erp/app.do?channel=' + channel+'&_='+Math.random();
	};//console.log($routeParams);
	$urlRouterProvider.otherwise("/app/home"),
	$stateProvider.state("app", {
		"abstract": !0,
        url: "/app",
        views: {
            "": {templateUrl: "/app/layout.html"},
            header_menu: {
                templateUrl: function() {
					return "/app/header/aside.nav.menu.html";//;
				}
            }
		}
    }).state("app.home", {
        url: "/home",
		templateUrl: function() {
			return __RESOURCE+'views/home.html?';
		},
        controller: function ($scope) {
        }
    }).state('app.Setting', {
        url: "/Setting/:view/:id/:channel", //url: "/role/edit?id", 由view的 ui-sref="app.{{module.module_channel}}({view:module.module_view,channel:module.url})" 决定
        templateUrl: function($routeParams, $rootScope, $scope) {
			var view = $routeParams.view;//有view访问静态文件
			return __RESOURCE + 'views/Setting/'+$routeParams.view+'.html?'+__VERSION;
        },
        controller: function($rootScope, $scope, $ocLazyLoad, $httpService, $routeParams) {},
		resolve: {
            deps: ["$ocLazyLoad","$stateParams",function($ocLazyLoad, $stateParams) {
				return $ocLazyLoad.load([__RESOURCE + "scripts/controllers/Setting/"+$stateParams.view+".js?"+__VERSION]);
            }]
        }
        
    }).state('app.Test', {
        url: "/Test/:test", //url: "/role/edit?id",
        templateUrl: function($routeParams) {
            return __RESOURCE + 'views/Test/'+$routeParams.test+'.html?'+__VERSION;
        },
		controller: function() {
		}
    }),
	$stateProvider.state("login", {
        url: "/login",
		templateUrl: "/login.html",
        resolve: {
            deps: ["$ocLazyLoad", function($ocLazyLoad) {
                return $ocLazyLoad.load([__RESOURCE + "vendor/libs/md5.min.js"]);
            }]
        }
    }).state("app.logout", {
        url: "/logout",
        templateUrl: function ($routeParams) {
            return "/login.html";
        },
        controller: function ($httpService, $location) {
            $httpService.post(__WEB + 'index/logout', '', function(response){
                $location.path('/login');
            });
        }
    })
}]);
app.controller('MainController',["$rootScope","$scope","$translate","$localStorage","$window","$location","$httpService","$stateParams","$modal",
	"$tooltip","$filter","$alert","$interval","$log", 
	function($rootScope,$scope,$translate,$localStorage,$window,$location,$httpService,$stateParams,$modal,$tooltip,$filter,$alert,$interval,$log) {
		function matchNavigator($window) {
			var navigatorInfo = $window.navigator.userAgent || $window.navigator.vendor || $window.opera;
			return /iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(navigatorInfo)
		}
		var isIE = !!navigator.userAgent.match(/MSIE/i) || !!navigator.userAgent.match(/Trident.*rv:11\./);
		isIE && angular.element($window.document.body).addClass("ie"); 
		matchNavigator($window) && angular.element($window.document.body).addClass("smart");
		$scope.app = {
			name: "博威利尔.ERP", version: "",
			color: {
				primary: "#155abb",info: "#2772ee",success: "#4bb622",warning: "#f88311",danger: "#e11144",
				inverse: "#a66bee",light: "#f1f2f3",dark: "#202a3a"
			},
			settings: {
				headerColor: "bg-primary",headerFixed: !0,headerShadow: !0,asideColor: "bg-dark lt",asideTop: !0
			}
		};
		$scope.options = {
			headerColor: ["bg-primary lt", "bg-primary ", "bg-primary dk", "bg-info lt", "bg-info", "bg-info dk", "bg-success lt", "bg-success ", "bg-success dk", "bg-inverse lt", "bg-inverse ", "bg-inverse dk", "bg-dark lt", "bg-dark", "bg-dark dk ", "bg-black ", "bg-black dk", "bg-white box-shadow-md"],
			asideColor: ["bg-primary dk", "bg-info dk", "bg-success dk", "bg-dark lt", "bg-dark", "bg-dark dk", "bg-black lt", "bg-black", "bg-black dk", "bg-white", "bg-light", "bg-light dk"]
		}; 
		$scope.setHeaderColor = function(color) {
			$scope.app.settings.headerColor = color
		}; 
		$scope.setAsideColor = function(color) {
			$scope.app.settings.asideColor = color
		}; 
		angular.isDefined($localStorage.appSettings) ? $scope.app.settings = $localStorage.appSettings : $localStorage.appSettings = $scope.app.settings; 
		$scope.$watch("app.settings", function() {
			$localStorage.appSettings = $scope.app.settings
		}, !0);
		$scope.langs = {en: "English",zh_CN: "中文"}; 
		$scope.select_lang = $scope.langs[$translate.proposedLanguage()] || "English";
		$scope.setLang = function(lang) {
			$scope.select_lang = $scope.langs[lang], $translate.use(lang)
		};
		//basevaule
		$scope._baseDateTime = function() {
			var unix_time =  new Date(baseDateTime.replace(/-/g,'/')).getTime() - 0;
			return unix_time - 0 + baseSeconds;
            //return baseDateTime.substr(0, 10);
		};
        $scope.getDay = function(format) {
            if(angular.isUndefined(format)) format = "yyyy-MM-dd";
			if(format == 'w') return new Date($scope._baseDateTime()).getDay();
            return $filter("date")($scope._baseDateTime(), format, 'UTC +8');
        };
        $scope.show = function(_id, id) {
            $("#"+_id).hide();$("#"+id).show();
        }
        //初始化变量
        $scope.__RESOURCE = __RESOURCE;$scope._resource = __RESOURCE;$scope.__WEB = __WEB;$scope.__IMGWEB = __IMGWEB;//'http://localhost/xiaoqu/images/'
		$scope.companyList = {};
		$scope.auditingProvisoList = [{id:"1",name:"填写"},{id:"2",name:"审核"}];
		$scope.currencySymbol = [{id:0,currency_name:"港元",currency_sname:"HKD",currency_symbol:"HK$"},
								 {id:1,currency_name:"美元",currency_sname:"USD",currency_symbol:"$"},
								 {id:2,currency_name:"欧元",currency_sname:"EUR",currency_symbol:"€"},
								 {id:3,currency_name:"人民币",currency_sname:"CNY",currency_symbol:"￥"},];
		//审核状态 1已遞交審核 2審核通過 -1退回 0未遞交
		$scope.auditingStateExplain = {"-1":"已退回","0":"未递交","1":"等待审核","2":"审核通过"};
		//刷新之后数据重新获取
		console.log("======>",$rootScope.employeeMenu);
		let noLogin = "1";
		if (noLogin == "0") {
			if(typeof($rootScope.employeeMenu) == 'undefined' || $rootScope.employeeMenu == "") {
				$httpService.post(__WEB + 'index/refresh', {}, function(result){
					if(result.data.success == true) {
						$scope.setCommonSetting(result.data.item);
						$httpService.header('token', result.data.item.employee.e_id);
						noLogin = "1";
		            }
				});
			}
		}
		$scope.setUiNav = function($event) {//设置css样式点击状态
			var b = angular.element($event.target).parent();
			b.parent().find("li").removeClass("active"), b.toggleClass("active"), b.find("ul") && ($scope.app.asideCollapse = !1)
		}//
		$rootScope.employeeMenu = {};$scope.hashEmployeeModule = {};
		$scope.setMenu = function($menus, $module_channel) {
			var resultList = $scope.resolvingModuleData($menus, $module_channel);
			$scope.menus = resultList.menus;$scope.channels = resultList.channels;//构造顶部菜单和下拉菜单
            $scope.hashEmployeeModule = resultList.hashEmployeeModule;//用户所有的module
		};
		$scope.resolvingModuleData = function($menus, $module_channel) {
			if($menus == '') $menus = $rootScope.employeeMenu;
			var channels = {}, channel_i = 0, menus = {}, hashEmployeeModule = {};
			if($menus != null && $menus != '') {
				for(var i in $menus) {
                    hashEmployeeModule[$menus[i].module_id] = $menus[i];
					if($menus[i].module_father_id == '-1') {
						channels[channel_i] = $menus[i];channel_i++;
					} else {
						var father_id         = $menus[i].module_father_id;
						var module_id         = $menus[i].module_id;
						var submenu_father_id = $menus[i].submenu_father_id;
						//if(typeof(menus[father_id]) == 'undefined') menus[father_id] = {};
						//if(typeof(menus[father_id][module_id]) == 'undefined') menus[father_id][module_id] = {};
						if(father_id == '0') {
							var children = {}, have_children = 0;
							if(typeof(menus[module_id]) != 'undefined') {//father_id 比 module_id 要大，在后面添加的 已经添加了children
								children = menus[module_id]['children'];have_children = 1;
							}
							menus[module_id] = $menus[i];//father_id == 0 第一行菜单
							menus[module_id]['hide'] = 'hide';
							if(menus[module_id]['module_channel'] == $module_channel) menus[module_id]['hide'] = '';
							menus[module_id]['children'] = children;
							menus[module_id]['have_children'] = have_children;
						} else {//
							if(typeof(menus[father_id]) == 'undefined') {menus[father_id] = {};menus[father_id]['children']={};}
							if(submenu_father_id == '0') {
								menus[father_id]['children'][module_id] = $menus[i];
								menus[father_id]['children'][module_id]['submenu'] = {};
								menus[father_id]['children'][module_id]['have_children'] = 0;
								menus[father_id]['have_children'] = 1;
							} else {
								menus[father_id]['children'][submenu_father_id]['submenu'][module_id] = $menus[i];
								menus[father_id]['children'][submenu_father_id]['have_children'] = 1;
							}
						}
					}
				}
			}
			return {'menus':menus,'hashEmployeeModule':hashEmployeeModule,'channels':channels};
		}
		$scope.checkMenuData = function($common) {
			if($common == null || $common == '') return;
			if(typeof($common.employeeMenu) != 'undefined' && $common.employeeMenu != null && $common.employeeMenu != '') 
				$scope.setMenu($common.employeeMenu, $common.module_channel);
		};
		$scope.reconvertChinese = function (str) {
			str = str.replace(/(&#)(\d{1,6});/gi,function($0){
				return String.fromCharCode(parseInt(escape($0).replace(/(%26%23)(\d{1,6})(%3B)/g,"$2")));
			});
			return str;
		};
		$scope.getErrorByCode = function($errorCode) {
			return $translate.instant("error.code."+$errorCode);
		};
		$scope.setChannelMenu = function($module_channel) {
			$scope.setMenu($rootScope.employeeMenu, $module_channel);
            $location.path('/app/home');
		};
		$rootScope._self_module = '';
		$scope.action_nav = "";$scope.action_nav_aside = "";
		$scope.setActionNavName = function(module_id, _self_nav) {//设置导航栏
			let menus = $scope.hashEmployeeModule, nav = "";
			let _self_module = menus[module_id];	
			$rootScope._self_module = _self_module;
			getChannelNav(_self_module);
			function getChannelNav(_this_module) {//递归函数
				let href = 'href="'+__WEB+'#!/app/'+_this_module.module_channel+'/'+_this_module.module_view+'/'
							+_this_module.module_id+'/'+_this_module.url+'"';
				let _nav = '<a '+href+'>' + _this_module.module_name + '</a>';
				_nav = _this_module.module_name;
				if(nav != "") {
					nav = _nav + ' <i class="fa fa-angle-double-right"></i> ' + nav;
				} else {
					nav = _nav;
				}
				if(typeof(menus[_this_module.module_father_id]) != 'undefined' && _this_module.module_father_id > 0) {
					getChannelNav(menus[_self_module.module_father_id]);
				}
			}
			$scope.action_nav = '' + nav;
			if(angular.isDefined(_self_nav) && _self_nav != '') {
				if(nav != "") nav += ' <i class="fa fa-angle-double-right"></i> ';
				nav += _self_nav;
				$scope.action_nav_aside = nav;
			}
			
		};
        $scope.getChannelModule = function(module_id) {
            return $scope.hashEmployeeModule[module_id];
        }
        $rootScope.employeeMenu = {};$rootScope.hashAccess = {};
        $scope.employee = {};$scope.loginEmployee = {};$scope.employeeHash = {};$scope.sectorHash = {};
		$scope.setCommonSetting = function(common) {//$common == null?
			if(angular.isDefined(common) && common != '') {
				if(typeof(common.employeeMenu) != 'undefined') {
					$rootScope.employeeMenu = common.employeeMenu;
					if(common.employeeMenu != null && common.employeeMenu != '') $scope.setMenu(common.employeeMenu, common.module_channel);
				}
				if(typeof(common.access) != 'undefined') {
					if(common.access != null && common.access != '') $scope.getHashAccess(common.access);
				}
				if(typeof(common.companyList) != 'undefined') {
					$scope.companyList = common.companyList;
				}
				if(typeof(common.employee) != 'undefined') {
					$scope.employee = angular.copy(common.employee);
				}
				if(typeof(common.employeeSector) != 'undefined') {
					$scope.loginEmployee = angular.copy(common.employeeSector);
				}
				//
				if(typeof(common.employeeList) != 'undefined') {
					common.employeeList.forEach(function(item) {
						$scope.employeeHash[item.e_id] = {...item};
					})
				}
				if(typeof(common.sectorList) != 'undefined') {
					common.sectorList.forEach(function(item) {
						$scope.sectorHash[item.sector_id] = {...item};
					})
				}
				$rootScope.__ImagesUploadUrl = __ImagesUploadUrl;
				$rootScope.__ImagesManagerUrl = __ImagesManagerUrl;
				$rootScope.__AuditingViewUrl = __AuditingViewUrl;
				//未起作用 ? 
				if(typeof(common._self_module) != 'undefined') {
					$rootScope._self_module = common._self_module;
					$scope.setActionNavName(common._self_module['module_id']);
				} else if(typeof($stateParams.id) != 'undefined') {
					$rootScope._self_module = $scope.hashEmployeeModule[$stateParams.id];
					$scope.setActionNavName($rootScope._self_module['module_id']);
				}//未起作用
			}
		};
		$scope.getHashMarket = function (marketList) {
			var hashMarket = {};
			if(marketList != '') {
				for(var i in marketList) {
					hashMarket[marketList[i].market_id] = marketList[i];
					for(var k in marketList[i].children) {
						hashMarket[marketList[i].children[k].market_id] = marketList[i].children[k];
					}
				}
			}
			$scope.hashMarket = hashMarket;
		}
		$scope.getHashAccess = function (accessList) {
			var hashAccess = {};
			for(var i in accessList) {
				hashAccess[accessList[i].module_id] = accessList[i].access;
			}
			$rootScope.hashAccess = hashAccess;
		}
		////*********************************////
		$scope.redirect = function(url) {
			$location.path(url);
		};
		$scope.reload = function($stateParams) {
			let path = "app/"+$rootScope._self_module.module_channel+'/'+$stateParams.view+'/'+$stateParams.id+'/'+$stateParams.channel;
			console.log(path);
			$location.path(path);
		};
		$scope._function = function(){};$scope._param = {};
		$scope.setController = function(_function, _param) {
			$scope._function = _function; $scope._param = _param;
		};
		$scope.getController = function() {
			return {'_function':$scope._function, '_param':$scope._param};
		};
		$scope.setHWPercent = function(className, h) {
			var height = window.screen.height;
			var newHeight = height * h;
		}
		$scope.selectCountryGroup = function (item){
	        if (item.country_enname[0] >= 'A' && item.country_enname[0] <= 'M')
	            return 'From A - M';
	        if (item.country_enname[0] >= 'N' && item.country_enname[0] <= 'Z') 
	            return 'From N - Z';
	    };
		//日历
		$scope.setCalendar = function (year, month) {
			var days = {}, k = 0;days[k] = {};
			//得到表示指定年和月的1日的那个时间对象
			var date = new Date(year, month - 1, 1);
			//1.先添加响应的空白的li:这个月1号是星期几，就添加几个空白的li
			var dayOfWeek = date.getDay(); //得到1日是星期几
			for(var i = 0; i < dayOfWeek; i++) {days[k][i] = "";}
			var daysOfMonth = new Date(year, month, 0).getDate();//计算一个月有多少天
			//2. 从1号开始添加li
			var j = dayOfWeek;
			for(var i = 1; i <= daysOfMonth; i++) {
				//days.push(i);
				date = new Date(year, month - 1, i);dayOfWeek = date.getDay();
				if(dayOfWeek == 0 && i > 1) {k++;j = 0;}
				if(typeof(days[k]) == 'undefined') days[k] = {};
				var day = i;
				if(i < 10) day = '0'+i;
				days[k][j] = day;j++;
			}
			if(j<6) {for(j; j<=6; j++) {days[k][j] = "";}}//补全
			return days;
		}
		$scope.arithmetic = function(value, symbol, parameter, to_fixed) {
			var value = value - 0;var parameter = parameter - 0;
			var result = eval('('+value+symbol+parameter+')');
			result = parseFloat(result.toPrecision(12));
			if(typeof(to_fixed) != 'undefined' && to_fixed >= 0) result = result.toFixed(to_fixed);
			return result;
		}
		$scope.weekday = new Array(7);
		$scope.weekday[0]="日";$scope.weekday[1]="一";$scope.weekday[2]="二";
		$scope.weekday[3]="三";$scope.weekday[4]="四";$scope.weekday[5]="五";$scope.weekday[6]="六";
        $scope.loading = $alert({scope : $scope, placement: 'top', type: 'info', templateUrl: '/loading.html', show: false});
        $scope.successAlert = {};
        var vm = $scope.vm = {};
        vm.value = 0;
        $scope.startProgressBar = function(index) {
            $scope.vm.value = index;
            var start = $interval(function(){
                $scope.vm.value = ++index;
                if (index > 99) {$interval.cancel(start);}
                if (index == 60) {index = 99;}
            }, 30);
        };
		vm.isLoad = 90;
		$scope.startLoading = function(index) {
            $scope.vm.isLoad = index;
            var start = $interval(function(){
                $scope.vm.isLoad = ++index;
                if (index >= 100) {$scope.loading.hide();}
                if (index >= 95) {$interval.cancel(start);}
                if (index == 60) {index = 95;}
            }, 3);
        };
        $scope.successAlert.startProgressBar = function(message) {
			if(angular.isUndefined(message)) {message = '操作成功！';}
			$alert({scope : $scope, title: 'Success', templateUrl: '/app/successAlertRound.html', content: message, placement: 'top-left', duration: 3, type: 'success', show: true});
			$scope.startProgressBar(0);
        };
		$scope.loading.start = function() {
            $scope.loading.show();$scope.startLoading(10);
        };
        $scope.loading.percent = function() {$scope.startLoading(99);};
		$scope.confirm = function(param) {//content, confirmCallback, param
			var content = angular.isDefined(param.content)?param.content : '';var confirmCallback = angular.isDefined(param.callback)?param.callback : null;
			var callbackParam = angular.isDefined(param.param)?param.param : null;
			$alert({scope : $scope, title: 'Notice', templateUrl: __RESOURCE+'views/Common/modalConfirm.html', content: content, placement: 'top', type: 'success', show: true, controller : function($scope) {$scope.callback = function() {if(confirmCallback){
				if(callbackParam != null) {confirmCallback(callbackParam);}else{confirmCallback();}};}}});
		}
		
}]);
//login 
app.controller("LoginController",function($rootScope, $scope, $httpService, $modal, $location, $translate, $tooltip, $log){
	var loginTooltip = '';
	$scope.login = function(valid) {
        if(valid == false) return;
        $scope.login.error_message = '';
		$scope.beginLoading =! $scope.beginLoading;
		var password = $scope.param.password;
		$scope.param.password = md5(md5(password));
		$httpService.post(__WEB + 'app.do?method=checkLogin', $scope, function(result){
			$scope.beginLoading =! $scope.beginLoading;
			if(result.data.success == true) {
                $location.path('/app/home');
				$scope.setCommonSetting(result.data.item);
				$httpService.header('token', result.data.item.employee.e_id);
            } else {
			    var message = $scope.reconvertChinese($translate.instant("error.code."+result.data.code));
                $scope.param.password = password;
                if(loginTooltip == ''){ 
					loginTooltip = $tooltip(angular.element('#email'), 
						{title: '<i class="fa fa-warning b-warning text-warning"></i> '+ message, show:true, placement: 'top-left', type: 'waring', html:true});
                    $('#email').on('mouseover', function (e) {
                        
                    });
                } else {loginTooltip.show();}
            }
		});
	}
});	
//plugin
app.directive('pageSelect', function() {
      return {
        restrict: 'E',
        template: '<input type="text" class="select-page" ng-model="inputPage" ng-change="selectPage(inputPage)">',
        link: function(scope, element, attrs) {
          scope.$watch('currentPage', function(c) {
            scope.inputPage = c;
          });
        }
      }
});
angular.module("app").directive("uiNav", ["$timeout", function() {
    return {
        restrict: "AC",
        link: function($scope, $element) {
            $element.find("a").bind("click", function() {
                var b = angular.element(this).parent();
                b.parent().find("li").removeClass("active"), b.toggleClass("active"), b.find("ul") && ($scope.app.asideCollapse = !1)
            })
        }
    }
}]);
</script>
<script language="javascript" src="/static/vendor/libs/moment.min.js?"></script>

</head>
<body ng-app="app">
<div class="app" ng-class="{'app-header-fixed':app.settings.headerFixed, 'app-aside-top':app.settings.asideTop}" ui-view ng-controller="MainController" id="MainController"></div>
<!--<div ui-view="header_menu"></div>-->
<script type="text/ng-template" id="/app/header/header.html">
<!-- navbar header -->
<div class="navbar-header" ng-class="{'box-shadow-inset dk':app.settings.headerShadow}">
	<button class="pull-right visible-xs" ng-click="app.navbarCollapse = !app.navbarCollapse"><i class="ti-settings"></i></button>
	<button class="pull-right visible-xs" ng-click="app.asideCollapse = !app.asideCollapse"><i class="ti-menu"></i></button>
<!-- brand logo -->
	<a class="navbar-brand text-lt" bs-aside="aside" data-template-url="/app/header/aside.tpl.html" data-placement="top" data-animation="am-slide-top aside-open-backdrop" data-container="body">
	  <i class="pull-right ti-arrow-circle-down text-sm m-v-xs m-l-xs"></i>
	  <i class="fas fa-frog text-xl"></i>
	  <img src="/static/images/logo.png" alt="." class="fab fa-suse hide">
	  <span class="hidden-folded m-l-xs">{{app.name}}<sup class="text-xs font-thin">{{app.version}}</sup></span>
	</a>
<!-- / brand logo -->
</div>
<!-- / navbar header -->
<!-- navbar collapse -->
<div class="navbar-collapse hidden-xs" ng-class="{'show animated fadeIn' : app.navbarCollapse}">
<!-- nav -->
	<ul class="nav navbar-nav navbar-left">
	  <li ui-sref-active="active" ng-class="">
		<a bs-dropdown="dropdown" data-animation="am-collapse" data-template-url="/app/header/employeeChannel.html">
			<span class="text-muted"><i class="ui-icon fa fa-home"></i></span>
			<span ng-repeat="(i, channel) in employeeChannel" ng-if="channel.default==1">{{channel.channel_name}}</span>
			<b class="caret m-h-xs hidden-sm"></b>
		</a>
	  </li>
	  <li><a ui-sref="app.home" translate="header.navbar.DASHBOARD">é¦é¡µ</a></li>
	  <!--<li><a ui-sref="mail.inbox" translate="header.navbar.EMAIL">Email</a></li>
	  <li><a ui-sref="ui.component.arrow" translate="header.navbar.UIKITS">UI Kits</a></li>
	  <li><a ui-sref="page.profile" translate="header.navbar.PAGES">Pages</a></li>-->
	</ul>
<!-- / nav -->
<!-- nabar right -->
	<ul class="nav navbar-nav navbar-right m-r-n">
	  <li>
		<a href bs-dropdown="dropdown" data-animation="am-collapse" data-template-url="/app/header/settings.html">
		  <i class="glyphicon glyphicon-cog"></i>
		  <span class="visible-xs-inline">Settings</span>
		</a>
	  </li>
	  <!--<li>
		<a href bs-aside="aside" data-template-url="/app/header/aside.tpl.chat.html" data-placement="right" data-animation="am-slide-right aside-open-inner modal-open" data-container="body">
		  <i class="glyphicon glyphicon-comment"></i>
		  <b class="badge badge-xs bg-warning up">3</b>
		  <span class="visible-xs-inline">Notifications</span>
		</a>
	  </li>-->
	  <li class="hidden-xs">
		<a href ui-fullscreen><i class="glyphicon glyphicon-resize-vertical"></i></a>
	  </li>
	  <li>            
		<a href class="clear no-padding-h" bs-dropdown="dropdown" data-animation="am-collapse" data-template-url="/app/header/user.html">
		  <img ng-src="{{__IMGWEB + loginEmployee.avatar}}" onError="this.src='/static/images/userimg/user_h.png'" class="navbar-img pull-right">
		  <span class="hidden-sm m-l">{{loginEmployee.employee_name}}</span>
		  <b class="caret m-h-xs hidden-sm"></b>
		</a>
	  </li>
	</ul>
<!-- / navbar right -->
<!-- search form -->
	<form class="navbar-form navbar-form-sm navbar-right visible-xs" role="search">
	  <div class="form-group">
		<div class="input-group">
		  <span class="input-group-btn">
			<button type="submit" class="btn btn-sm no-bg btn-icon no-shadow no-padder"><i class="ti-search"></i></button>
		  </span>
		  <input type="text" ng-model="selected" typeahead="state for state in states | filter:$viewValue | limitTo:8" class="form-control input-sm no-bg no-border" placeholder="Search...">              
		</div>
	  </div>
	</form>
<!-- / search form -->
</div>
<!-- / navbar collapse -->
</script><!-- /app/header/header.html -->
<script type="text/ng-template" id="/app/header/aside.nav.menu.html">
<nav ui-nav>
  <ul class="nav">
    <li class="nav-header h4 m-v-sm">
      UI Kits
    </li>
	<li ng-repeat="(i, module) in menus" ui-sref-active="active" ng-class="" class="{{module.module_channel}} {{module.hide}} menu">
		<a ng-if="module.have_children==1" ng-click="setUiNav($event)"> 
          <i class="icon {{module.ico}} text-lt"></i>
          <span>{{module.module_name}}</span>
          <span class="text-muted">
           <i class="fa fa-caret-down"></i>
          </span>
		</a>
        <a ng-if="module.have_children==0" ui-sref="app.{{module.module_channel}}({view:module.module_view,id:module.module_id,channel:module.url})" ng-click="setActionNavName(module.module_id);setUiNav($event)">
          <i class="icon {{module.ico}} text-lt"></i>
          <span>{{module.module_name}}</span>
          <span class="pull-right text-muted" ng-if="module.have_children==1">
           <i class="fa fa-caret-down"></i>
          </span>
		</a>
		<ul class="nav nav-sub bg" ng-if="module.have_children==1">
			<li ng-repeat="(children_id, children) in module.children" ng-if="children.is_menu==1">
			  <a ui-sref="app.{{children.module_channel}}({view:children.module_view,id:children.module_id,channel:children.url})" ng-click="setActionNavName(children.module_id);setUiNav($event)">
				<span class="font-normal">{{children.module_name}}</span>
				<span class="pull-right text-muted" ng-if="children.have_children==1">
				  <i class="fa fa-caret-down"></i>
				</span>
			  </a>
			  <ul class="nav nav-sub bg" ng-if="children.have_children==1">
				<li ng-repeat="(submenu_id, submenu) in children.submenu">
				  <a ui-sref="app.{{submenu.module_channel}}({view:submenu.module_view,id:submenu.module_id,channel:submenu.url})" ng-click="setActionNavName(submenu.module_id);setUiNav($event)">{{submenu.module_name}}</a>
				</li>
			  </ul>
			</li>        
        </ul>
	</li>
  </ul>
</nav>
</script><!-- /app/header/aside.nav.menu.html -->
<script type="text/ng-template" id="/app/header/aside.tpl.html">
<div class="aside bg-dark box-shadow-lg" role="menu">
  <div class="p-lg" ng-click="$hide()">
    <a ng-repeat="(i, channel) in channels" ng-click="setChannelMenu(channel.module_channel)" class="p-lg bg-info item inline m-xs">
      <i class="{{channel.ico}} text-2x"></i>
      <span class="p-xs p-h-sm bottom text-xs hidden-xs text-center">{{channel.module_name}}</span>
    </a>
  </div>
</div>
</script><!-- /app/header/aside.tpl.html -->
<script type="text/ng-template" id="/app/header/settings.html">
<div tabindex="-1" class="p dropdown-menu bg-white bg-inherit no-b-t no-margin w-sm" role="menu">                
	<p class="clearfix">
	  <a class="inline {{color}} p-xs m-h-xs m-v-xs pull-left no-borders" ng-repeat="color in options.headerColor" ng-click="setHeaderColor(color)">
	  </a>
	</p>
	<div class="line b-b b-light m-h-xs"></div>
	<p class="clearfix">
	  <a class="inline {{color}} p-xs m-h-xs m-v-xs pull-left no-borders" ng-repeat="color in options.asideColor" ng-click="setAsideColor(color)">
	  </a>
	</p>
	<div class="line b-b b-light m-h-xs"></div>                
	<div class="m-v-xs">
	  <label class="ui-checks m-h-xs no-margin">
		<input type="checkbox" ng-model="app.settings.headerFixed"><i></i> Header fixed
	  </label>
	</div>
	<div class="m-v-xs">
	  <label class="ui-checks m-h-xs no-margin">
		<input type="checkbox" ng-model="app.settings.headerShadow"><i></i> Header shadow
	  </label>
	</div>
	<div class="m-v-xs">
	  <label class="ui-checks m-h-xs no-margin">
		<input type="checkbox" ng-model="app.settings.asideTop"><i></i> Aside top
	  </label>
	</div>
</div>
</script><!-- /app/header/settings.html -->
<script type="text/ng-template" id="/app/header/aside.tpl.chat.html">
<div class="aside w b-l" role="dialog">
  <div class="box">
    <div class="p">
      <a ng-click="$hide()" class="pull-right text-muted"><i class="fa fa-times"></i></a>
      Chat
    </div>
    <div class="box-row">
      <div class="box-cell">
        <div class="box-inner">
          <div class="list-group no-radius no-borders">
            <a class="list-group-item p-h-md">
              <img src="/static/images/a1.jpg" class="pull-left w-thumb m-r b-b b-b-2x b-success">
              <div class="clear">
                <span class="font-bold block">Jonathan Doe</span>
                <span class="clear text-ellipsis text-xs">"Hey, What's up"</span>
              </div>
            </a>
            <a class="list-group-item p-h-md">
              <img src="/static/images/a2.jpg" class="pull-left w-thumb m-r b-b b-b-2x b-success">
              <div class="clear">
                <span class="font-bold block">James Pill</span>
                <span class="clear text-ellipsis text-xs">"Lorem ipsum dolor sit amet onsectetur adipiscing elit"</span>
              </div>
            </a>
            <div class="p-h-md p-v-xs m-t">Work</div>
            <a class="list-group-item p-h-md p-v-xs">
                <i class="fa fa-circle text-success text-xs m-r-xs"></i>
                <span>Jonathan Morina</span>
            </a>
            <a class="list-group-item p-h-md p-v-xs">
                <i class="fa fa-circle text-success text-xs m-r-xs"></i>
                <span>Mason Yarnell</span>
            </a>
            <a class="list-group-item p-h-md p-v-xs">
                <i class="fa fa-circle text-muted-lt text-xs m-r-xs"></i>
                <span>Jeff Broderik</span>
            </a>
            <div class="p-h-md p-v-xs m-t">Partner</div>            
            <a class="list-group-item p-h-md p-v-xs">
                <i class="fa fa-circle text-success text-xs m-r-xs"></i>
                <span>Mason Yarnell</span>
            </a>
            
          </div>
        </div>
      </div>
    </div>
    <div class="p-h-md p-v">
      <p>Invite People</p>
      <a href class="text-muted"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
      <a href class="text-muted"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
    </div>
  </div>
</div>
</script><!-- /app/header/aside.tpl.chat.html -->
<script type="text/ng-template" id="/app/header/user.html">
<ul class="dropdown-menu pull-right no-b-t">
	<!--<li><a ui-sref="page.profile">Profile</a></li>
	<li><a ui-sref="page.settings">Settings</a></li>
	<li class="divider"></li>
	<li><a ui-sref="lockme">Lock me</a></li>-->
	<li><a ui-sref="app.logout">Logout</a></li>
</ul>
</script><!-- /app/header/user.html -->
<script type="text/ng-template" id="/app/header/employeeChannel.html">
<ul class="dropdown-menu pull-left no-b-t" ng-class="{'show animated fadeIn' : app.navbarCollapse}">
	<li ng-repeat="(i, channel) in employeeChannel" ng-click="switchChannel(channel.channel_id)" ng-if="channel.channel_father_id==channel.channel_id"><a>{{channel.channel_name}}</a></li>
</ul>
</script><!-- /app/header/employeeChannel.html -->


<!--main content-->
<script type="text/ng-template" id="/app/layout.html">
<!-- header -->
<header id="header" class="app-header navbar {{app.settings.headerColor}}" role="menu" ng-include="'/app/header/header.html'"></header>
<!-- / header -->
<!-- aside -->
<aside id="aside" class="app-aside hidden-xs {{app.settings.asideColor}}" ng-class="{'show animated fadeInLeft' : app.asideCollapse}" ng-include="'/app/header/aside.nav.menu.html'"></aside>
<!-- / aside -->
<!-- content -->
<div id="content" class="app-content" role="main" ui-view></div>
<div ui-view="header_menu"></div>
<!-- / content -->
<!-- footer -->
<footer id="footer" class="app-footer col-sm-3" role="footer" ng-include="'/app/footer.html'"></footer>
<!-- / footer -->
</script><!--main content--><!-- /app/layout.html -->
<!--common langs-->
<script type="text/ng-template" id="/langs.html">
<ul class="dropdown-menu">
	<li ng-repeat="(langKey, label) in langs">
	  <a ng-click="setLang(langKey, $event)" href>{{label}}</a>
	</li>
</ul>
</script><!-- /langs.html -->
<script type="text/ng-template" id="/login.html">
<div class="container">  
  <div class="center-block w-xl w-auto-xs m-b-lg">
    <div class="text-2x m-v-lg text-primary"><i class="fas fa-frog b-danger text-xl"></i> {{app.name}}</div>
    <div class="m-b text-sm" translate="login.hint.WORD">Sign in with your Account</div>
    <form name="login_form" class="form-validation" ng-submit="login(login_form.$valid)" ng-controller="LoginController">
      <div class="form-group m-b-xs">
        <label class="hide">Email</label>
		<!--ng-pattern="/[a-zA-Z\.\-_]@[a-zA-Z\.\-_]\.[a-z]{2,7}/"-->
        <input type="text" id="email" name="email" placeholder="手机号码/some@email.com" ng-model="param.email" required class="form-control" ng-pattern="/(([0-9a-zA-Z\.\-_]+)@([0-9a-zA-Z\.\-_]+)\.[a-z]{2,7})|(1[0-9]{10})/">
      </div>
      <div class="form-group m-b-xs">
        <label class="hide">Password</label>
        <input type="password" placeholder="Password" class="form-control" ng-model="param.password" required>
      </div>
      <!--<div class="checkbox no-margin"><label class="ui-checks"><input type="checkbox"><i></i> Keep me signed in</label></div>-->
      <button type="submit" class="btn btn-rounded btn-info p-h-md m-v-lg" btn-loading-text="{{'common.hint.LOADING' | translate}}" trigger-loading="beginLoading" translate="login.hint.SIGN">Sign in</button>
      <div class="btn-group m-b">
        <div class="btn-group dropdown">
          <button type="button" class="btn btn-link" data-animation="am-fade-and-slide-top" bs-dropdown="dropdown" aria-haspopup="true" aria-expanded="false" data-template-url="/langs.html">{{select_lang}} <span class="caret"></span>
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
<ons-page>
  <ons-toolbar>
    <div class="center">{{title}}</div>
  </ons-toolbar>

  <ons-tabbar swipeable position="auto" ons-prechange="updateTitle($event)">
    <ons-tab page="tab1.html" label="Tab 1" icon="ion-home, material:md-home" badge="7" active>
    </ons-tab>
    <ons-tab page="tab2.html" label="Tab 2" icon="md-settings" active-icon="md-face">
    </ons-tab>
  </ons-tabbar>
</ons-page>

<template id="tab1.html">
  <ons-page id="Tab1">
    <p style="text-align: center;">
      This is the first page.
    </p>
  </ons-page>
</template>

<template id="tab2.html">
  <ons-page id="Tab2">
    <p style="text-align: center;">
      This is the second page.
    </p>
  </ons-page>
</template>
</script><!-- /login.html -->
<script type="text/ng-template" id="/modal-warning.html">
<div class="modal" style="z-index: 104000;" tabindex="-1" role="dialog" id="modal-warning">
  <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header" ng-show="title">
		<button type="button" class="close" ng-click="$hide()">&times;</button>
		<h4 class="modal-title"><i class="glyphicon glyphicon-exclamation-sign b-warning text-warning"></i> <span ng-bind-html="title"></span></h4>
	  </div>
	  <div class="modal-body" ng-show="content">
		<p ng-bind-html="content"></p>
	  </div>
	  <div class="modal-footer">
		<button type="button" class="btn btn-rounded btn-default" ng-click="$hide()">Close</button>
	  </div>
	</div>
  </div>
</div>
</script><!-- /modal-warning.html -->
<script type="text/ng-template" id="/modal-notice.html">
<div class="modal" tabindex="-1" role="dialog" id="modal-warning">
  <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header" ng-show="title">
		<button type="button" class="close" ng-click="$hide()">&times;</button>
		<h4 class="modal-title"><i class="glyphicon glyphicon-exclamation-sign b-warning text-warning"></i> <span ng-bind-html="title"></span></h4>
	  </div>
	  <div class="modal-body" ng-show="content">
		<p ng-bind-html="content"></p>
	  </div>
	  <div class="modal-footer">
		<button type="button" class="btn btn-rounded btn-default" ng-click="$hide()">Close</button>
	  </div>
	</div>
  </div>
</div>
</script><!-- /modal-notice.html -->
<script type="text/ng-template" id="/modal-success.html">
<div class="modal" tabindex="-1" role="dialog" id="modal-success">
  <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header" ng-show="title">
		<button type="button" class="close" ng-click="$hide()">&times;</button>
		<h4 class="modal-title"><i class="glyphicon glyphicon-exclamation-sign b-success text-success"></i> <span ng-bind-html="title"></span></h4>
	  </div>
	  <div class="modal-body" ng-show="content">
		<p ng-bind-html="content"></p>
	  </div>
	  <div class="modal-footer">
		<button type="button" class="btn btn-rounded btn-default" ng-click="$hide()">Close</button>
	  </div>
	</div>
  </div>
</div>
</script><!-- /modal-success.html -->
<script type="text/ng-template" id="/app/aside.html">
<div class="app-aside-inner" bs-affix>
  <div class="app-aside-body scrollable hover" ui-view="header_menu"></div>
  <div class="app-aside-footer p text-xs text-center">
    <span><strong class="text-lt">3.5</strong>GB</span>
    <div class="progress progress-xs bg no-margin m-h-xs inline w-xs">
      <div class="progress-bar progress-bar-info" style="width:30%"></div>
    </div>
    <span>10GB</span>
  </div>
</div>
</script><!-- /app/aside.html -->
<script type="text/ng-template" id="/app/footer.html">
<div class="p bg-white text-xs">
  <div class="pull-right hidden-xs hidden-sm text-muted">
    <strong>{{app.name}}</strong> -  &copy; Copyright 2019
  </div>
  <ul class="list-inline no-margin text-center-xs">
    <li>
      <a bs-dropdown="dropdown" data-placement="top-left" data-animation="am-flip-x" data-template-url="/langs.html">{{select_lang}}</a>
    </li>
    <li class="text-muted">-</li>
  </ul>
</div>
</script><!-- /app/footer.html -->
<script type="text/ng-template" id="/loading.html">
<div class="modal" tabindex="-1" role="dialog">
<div class="modal-dialog">
<div class="progress progress-striped active">
	<div class="progress-bar progress-bar-info" ng-style="{width: vm.isLoad + '%'}">Loading... {{vm.isLoad}}%</div>
</div>
</div>
</div>
</script><!-- /loading.html -->
<script type="text/ng-template" id="/app/accountsMenu.html">
    <ul class="dropdown-menu">
      <li><a href ng-click="bookingAccounts('', '')"><i class="fas fa-coins"></i> 收款</a></li>
      <li><a href ng-click="bookingAccounts('', 'refund')"><i class="fas fa-coins"></i> 退款</a></li>
      <li class="divider"></li>
      <li ng-if="bookDetail.receivable_id>0"><a href ng-click="bookingAccounts('', 'hanging')"><i class="fas fa-comments-dollar"></i> 挂账</a></li>
    </ul>
</script><!-- /app/accountsMenu.html -->
<script type="text/ng-template" id="/app/customerMarket.html">
<aside class="app-aside bg-white lt">
<nav>
  <ul class="nav">
    <li>
        <a class="btn btn-default customer_btn" style="padding:6px !important;" id="customer_ul" ng-mouseover="showCustomerMarket($event)">
            <span class="pull-right text-muted">
              <i class="fa fa-caret-down"></i>
            </span>
            <i class="icon fa fa-users text-lt"></i>
            <span>{{market_name}}</span>
         </a>
         <ul class="nav nav-sub bg-white b">
            <li>
              <div>
              	<span ng-if="doing_async">...loading...</span>
              	<div lazy-load="angularBootstrapNavTree">
              		<abn-tree tree-data="my_data" tree-control="my_tree" expand-level="3"
              			initial-selection="Granny Smith" icon-leaf="fa fa-file-o" icon-expand="fa fa-angle-right"
              			icon-collapse="fa fa-angle-down">
              		</abn-tree>
              	</div>
              </div>
            </li>
         </ul>
    </li>
  </ul>
</nav>
</aside>
</script><!-- /app/customerMarket.html -->
<script type="text/ng-template" id="pagination.custom.html">
<nav ng-if="pages.length >= 2">
  <ul class="pagination">
    <li><a ng-click="selectPage(1)">First</a></li>
    <li><a ng-click="selectPage(currentPage - 1)">&lt;</a></li>
    <li class=""><a><page-select></page-select> of {{numPages}}</a></li>
    <li><a ng-click="selectPage(currentPage + 1)">&gt;</a></li>
    <li><a ng-click="selectPage(numPages)">Last</a></li>
  </ul>
</nav>
</script><!-- pagination.custom.html -->
<script type="text/ng-template" id="/app/commonNavMenu.html">
<aside class="app-aside bg-white lt">
<nav>
  <ul class="nav">
    <li>
        <a class="btn btn-default customer_btn" style="padding:6px !important;" id="commonNavMenu" ng-mouseover="showCommonNavMenu($event)">
            <span class="pull-right text-muted">
              <i class="fa fa-caret-down"></i>
            </span>
            <i class="icon fa fa-users text-lt"></i>
            <span>{{this_nav_menu_name}}</span>
         </a>
         <ul class="nav nav-sub bg b">
            <li ng-repeat="(i, father) in ThisNavMenuList">
              <a ng-click="selectCommonNavMenu(father, 'father')">
                <span class="pull-right text-muted" ng-if="father.children!=''">
                  <i class="fa fa-caret-down"></i>
                </span>
                <span class="font-normal">{{father.label}}</span>
              </a>
              <ul class="nav nav-sub bg b" ng-if="father.children!=''">
                <li ng-repeat="(j, children) in father.children"><a ng-click="selectCommonNavMenu(children, 'children')">{{children.label}}</a></li>
              </ul>
            </li>
         </ul>
    </li>
  </ul>
</nav>
</aside>
</script><!-- /app/commonNavMenu.html -->
<script type="text/ng-template" id="/app/successAlertRound.html">
<div class="alert" tabindex="-1"><span ng-class="[type ? 'alert-' + type : null]"></span>
    <div class="text-sm btn btn-rounded btn-success no-margin box-shadow" style="padding-bottom:0px !important;opacity: 0.8;">
        <i class="fas fa-check-circle pull-left">　</i>
        <span ng-bind="title"></span>　<span class="font-bold text-lt" ng-bind-html="content"></span>
        <span class="pull-right"> <button type="button" class="close" ng-click="$hide()">&times;</button></span>
        <div class="progress progress-xxs no-margin no-radius dk m-t-xs">
            <div class="progress-bar progress-bar-success" ng-style="{width: vm.value + '%'}"></div>
        </div>
    </div>
</div>
</script><!-- /app/successAlertRound.html -->
<!-- ShowSector -->
<script type="text/ng-template" id="ShowSector.html">
<div class="aside box-shadow b-r aside-m p" tabindex="-1" role="dialog">
	<div class="aside-header"><i class="fa fa-building-o"> </i>
		<span class="no-margin">选择部门</span>
		<button type="button" class="close" ng-click="$hide()">&times;</button>
	</div>
	<div class="p-md">
		<div class="panel panel-default">
			<div class="panel-heading bg-white">
				<span class="font-bold">所有部门</span>
			</div>
			<div class="row">
				<div class="panel-body col-sm-12 pre-scrollable">
				<span ng-if="doing_async">...loading...</span>
				<div lazy-load="angularBootstrapNavTree">
					<abn-tree tree-data="my_data" tree-control="my_tree" on-select="setSector(branch)" expand-level="3"
						initial-selection="Granny Smith" icon-leaf="fa fa-file-o" icon-expand="fa fa-angle-right"
						icon-collapse="fa fa-angle-down">
					</abn-tree>
				</div>
				</div>
			</div>
		</div>
		<footer class="panel-footer aside-footer text-right">
			<div class="btn-group">
				<button type="button" class="btn btn-rounded btn-default" ng-click="$hide()"><i class="fa fa-times"> </i> 关闭</button>
				<button type="submit" class="btn btn-rounded btn-primary" btn-loading-text="{{'common.hint.LOADING' | translate}}"
					ng-click="setSectorOk()" trigger-loading="beginLoading"><i class="fa fa-save"> </i> 确定</button>
			</div>
		</footer>
	</div>
</div>
</script>
<!-- AddEditSector -->
</body>
</html>